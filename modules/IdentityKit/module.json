{
  "schemaVersion": 1,
  "moduleId": "IdentityKit",
  "displayName": "IdentityKit",
  "version": "1.0.0",
  "minFrameworkVersion": "1.0.0",
  "publisher": "47Project",
  "description": "Identity and secrets workflows with plans and auditing.",
  "category": "Security",
  "tags": [
    "identity",
    "secrets",
    "audit"
  ],
  "ui": {
    "icon": "assets/icon.png",
    "defaultRoute": "/id/overview",
    "allowPopOut": true,
    "navigation": [
      {
        "id": "overview",
        "title": "Overview",
        "route": "/id/overview"
      },
      {
        "id": "vault",
        "title": "Secrets Vault",
        "route": "/id/vault"
      },
      {
        "id": "plans",
        "title": "Plans",
        "route": "/id/plans"
      },
      {
        "id": "runs",
        "title": "Run History",
        "route": "/id/runs"
      },
      {
        "id": "settings",
        "title": "Settings",
        "route": "/id/settings"
      }
    ]
  },
  "settings": {
    "rootKey": "Framework.Modules.IdentityKit",
    "storageScopes": {
      "policy": [
        "trust.*",
        "risk.*",
        "allowlist.*",
        "denylist.*"
      ],
      "machine": [
        "vault.*",
        "audit.*"
      ],
      "user": [
        "ui.*",
        "defaults.*"
      ]
    },
    "pages": [
      {
        "id": "id.settings",
        "title": "IdentityKit Settings",
        "route": "/id/settings",
        "groups": [
          {
            "id": "vault",
            "title": "Vault",
            "controls": [
              {
                "key": "vault.backend",
                "type": "dropdown",
                "title": "Vault backend",
                "default": "WindowsCredentialManager",
                "risk": "Safe",
                "options": [
                  "WindowsCredentialManager",
                  "DPAPI_File",
                  "Disabled"
                ]
              },
              {
                "key": "vault.requireUnlock",
                "type": "toggle",
                "title": "Require unlock on launch",
                "default": true,
                "risk": "Caution"
              }
            ]
          },
          {
            "id": "audit",
            "title": "Audit",
            "controls": [
              {
                "key": "audit.eventLog",
                "type": "toggle",
                "title": "Write Windows Event Log",
                "default": false,
                "risk": "Caution",
                "requiresCapability": "cap.eventlog.write"
              }
            ]
          }
        ]
      }
    ]
  },
  "capabilities": [
    "cap.policy.read",
    "cap.logs.write",
    "cap.diagnostics.bundle"
  ],
  "riskProfile": {
    "defaultRiskLevel": "Caution",
    "unsafeRequiresExplicitEnable": true,
    "unsafeUIWarnings": true
  },
  "trust": {
    "signatureRequired": true,
    "contentSignatureRequired": true,
    "publisherThumbprintsAllowlist": [
      "<YOUR_CERT_THUMBPRINT>"
    ]
  }
}